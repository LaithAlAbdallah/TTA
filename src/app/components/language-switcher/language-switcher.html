<div class="language-switcher">
  <button
    class="language-button"
    (click)="toggleDropdown()"
    [attr.aria-expanded]="isOpen"
    aria-label="Select language">
    <img class="flag" [src]="languageService.currentLanguage.flag" [alt]="languageService.currentLanguage.name + ' flag'" />
    <span class="language-name">{{ languageService.currentLanguage.name }}</span>
    <span class="arrow" [class.open]="isOpen">â–¼</span>
  </button>

  <div class="dropdown" [class.open]="isOpen" *ngIf="isOpen">
    <button
      *ngFor="let language of languageService.languages"
      class="dropdown-item"
      [class.active]="language.code === languageService.currentLanguage.code"
      (click)="selectLanguage(language.code)"
      [attr.aria-label]="'Switch to ' + language.name">
      <img class="flag" [src]="language.flag" [alt]="language.name + ' flag'" />
      <span class="language-name">{{ language.name }}</span>
    </button>
  </div>
</div>

<div class="backdrop" *ngIf="isOpen" (click)="closeDropdown()"></div>
